<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Wp-vagrant by digitalquery</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Wp-vagrant</h1>
          <h2>A simple but powerful Vagrant setup for WordPress development</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/digitalquery/wp-vagrant/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/digitalquery/wp-vagrant/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/digitalquery/wp-vagrant" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
<a name="vagrant-box-with-ubuntu-1404-nginx-mysql-and-php-fpm" class="anchor" href="#vagrant-box-with-ubuntu-1404-nginx-mysql-and-php-fpm"><span class="octicon octicon-link"></span></a>Vagrant Box with Ubuntu 14.04, Nginx, MySQL and PHP-FPM</h1>

<p>A Vagrant setup to create an Ubuntu 14.04 (Trusty) virtual machine with Nginx, MySQL and PHP for WordPress development.</p>

<p>Intended to be as simple as possible - just drop into existing WP folder, modify , add a database dump, and within minutes, you should be able to browse to nginx.local and see your site.</p>

<ul>
<li>Loads specified database dump as part of provisioning</li>
<li>Renames all domain references using <a href="wp-cli.org">WP-CLI</a>
</li>
<li>Dumps the database to the shared folder on <code>vagrant destroy</code> â€” (this needs the <a href="https://github.com/emyl/vagrant-triggers">vagrant triggers plugin</a> to be installed from <a href="https://github.com/emyl/vagrant-triggers">(https://github.com/emyl/vagrant-triggers)</a>)</li>
<li>Remote debugging using XDebug</li>
</ul><h2>
<a name="acknowledgements" class="anchor" href="#acknowledgements"><span class="octicon octicon-link"></span></a>Acknowledgements</h2>

<p>This Vagrant box and provisioning is based on <a href="https://github.com/paulherron/vagrant_precise32_nginx_mysql_php-fpm">this basebox from Paul Herron</a> and the <a href="http://paulherron.com/blog/making_your_own_vagrant_wordpress_box/">accompanying blog post</a>.</p>

<h2>
<a name="whats-included-in-the-vm" class="anchor" href="#whats-included-in-the-vm"><span class="octicon octicon-link"></span></a>What's included in the VM?</h2>

<ul>
<li>Ubuntu 14.04 LTS (Trusty Tahir)</li>
<li>Nginx, listening on port 80 and on 443 using a dummy, self-signed certificate</li>
<li>MySQL, listening for remote connections so you can access it from your host machine, for example using <a href="http://www.sequelpro.com/">SequelPro</a>
</li>
<li>PHP-FPM</li>
<li>PHP 5.5, with OpCache and XDebug</li>
<li><a href="http://byobu.co/">Byobu</a></li>
<li><a href="wp-cli.org">WP-CLI</a></li>
<li>Dump database automatically on <code>vagrant destroy</code>
</li>
</ul><h2>
<a name="instructions" class="anchor" href="#instructions"><span class="octicon octicon-link"></span></a>Instructions</h2>

<p>These instructions are OS X specific, but the overall solution should work on any platform that Vagrant and VirtualBox support.</p>

<ul>
<li>Install VirtualBox</li>
<li>Install Vagrant</li>
<li>Install Vagrant triggers (vagrant plugin install vagrant-triggers)</li>
<li>Install vagrant-hostupdater (vagrant plugin install vagrant-hostsupdater)</li>
<li>Clone this repository:  <code>git clone git@bitbucket.org:digitalquery/vagrant-nginx.git</code>

<ul>
<li>Or download an archive of the files here:   <a href="https://bitbucket.org/digitalquery/vagrant-nginx/get/master.tar.gz">https://bitbucket.org/digitalquery/vagrant-nginx/get/master.tar.gz</a>, and then <code>tar zxvf master.tar.gz</code>
</li>
<li>The rest of these instructions assume you have a folder <code>/Downloads/vagrant-wp/</code> that contains the unzipped / cloned files, and the WP folder in question is <code>~/Sites/wptest/</code>
</li>
</ul>
</li>
<li>Copy the Vagrantfile from the zip file or the clone folder to the root folder of the site you want to test - for a normal WP install, this is the main WP folder (ie where your wp-config.php is): <code>cp /Downloads/vagrant-wp/Vagrantfile ~/Sites/wptest</code>
</li>
<li>copy the provisioning folder and subfolders: <code>cp -r /Downloads/vagrant-wp/Vagrantfile/provisioning ~/Sites/wptest</code>
</li>
<li>if you want a database dump to be loaded into MySQL, then put a database dump into the provisioning folder</li>
<li>edit <code>~/Sites/provisioning/</code>:

<ul>
<li>mysql_root_password='root'# your mysql root password</li>
<li>import_database=true # if import_database is true, then we'll try to import the database dump into the vagrant mysql</li>
<li>wp_db_name = "" # the database name (should be the same as in wp-config.php)</li>
<li>wp_db_user='' # database user (should be the same as in wp-config.php)</li>
<li>wp_db_password ='' # db password (should be the same as in wp-config.php)</li>
<li>wp_db_dump_file='' # the name of the dump file, relative to the provisioning folder. So, if your db dump file is provisioning/wp_db.sql, wp_db_dump_file='wp_db.sql'</li>
<li>import_site_domain='' # the domain you've been using for local development. The provisioning process will use wp-cli to safely replace this with <code>nginx.local</code>
</li>
<li>wordpress_path='' # normally /vagrant. If you've installed WP into a subdirectory, then put the path here, eg '/vagrant/blog'</li>
</ul>
</li>
<li>And now you can run <code>vagrant up</code>. The provisioning scripts should start working and between 2 - 10 minutes later, you should be able to browse to nginx.local and see your site running.</li>
</ul>
        </section>

        <footer>
          Wp-vagrant is maintained by <a href="https://github.com/digitalquery">digitalquery</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

                  <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-56497-2");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

      </div>
    </div>
  </body>
</html>